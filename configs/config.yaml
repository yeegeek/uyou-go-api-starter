# ===========================================
# Go REST API Boilerplate - Base Configuration
# ===========================================
# 
# CONFIGURATION PRIORITY (highest to lowest):
# 1. Environment variables (.env file)
# 2. Environment-specific config (config.production.yaml, config.staging.yaml, etc.)
# 3. This base configuration file (config.yaml) - YOU ARE HERE
#
# üîß Environment variables can override any setting below
# üìù See .env.example for common overrides
# üåç See config.{environment}.yaml for environment-specific defaults
#
# ===========================================

app:
  name: "UYou API Starter API"                  # Override with APP_NAME
  version: "1.0.0"                  # Override with APP_VERSION
  environment: "development"        # Override with APP_ENVIRONMENT
  debug: true                       # Override with APP_DEBUG

database:
  host: "db"                        # Override with DATABASE_HOST
  port: 5432                        # Override with DATABASE_PORT  
  user: "postgres"                  # Override with DATABASE_USER
  password: ""                      # Override with DATABASE_PASSWORD (recommended)
  name: "uyou_api"                      # Override with DATABASE_NAME
  sslmode: "disable"                # Override with DATABASE_SSLMODE
  max_open_conns: 100               # Override with DATABASE_MAX_OPEN_CONNS
  max_idle_conns: 10                # Override with DATABASE_MAX_IDLE_CONNS
  conn_max_lifetime: 3600           # Override with DATABASE_CONN_MAX_LIFETIME (Áßí)
  conn_max_idle_time: 600           # Override with DATABASE_CONN_MAX_IDLE_TIME (Áßí)

jwt:
  access_token_ttl: "15m"           # Override with JWT_ACCESS_TOKEN_TTL
  refresh_token_ttl: "168h"         # Override with JWT_REFRESH_TOKEN_TTL
  ttlhours: 24                      # Deprecated: use access_token_ttl instead

server:
  port: "8080"                      # Override with SERVER_PORT
  readtimeout: 10                   # Override with SERVER_READTIMEOUT (seconds)
  writetimeout: 10                  # Override with SERVER_WRITETIMEOUT (seconds)
  idletimeout: 120                  # Override with SERVER_IDLETIMEOUT (seconds)
  shutdowntimeout: 30               # Override with SERVER_SHUTDOWNTIMEOUT (seconds)
  maxheaderbytes: 1048576           # Override with SERVER_MAXHEADERBYTES (1MB default)

logging:
  level: "info"                     # Override with LOGGING_LEVEL (debug|info|warn|error)
  format: "json"                    # Override with LOGGING_FORMAT (json|text)
  output: "stdout"                  # Override with LOGGING_OUTPUT (stdout|file)
  file: "/var/log/app.log"          # Override with LOGGING_FILE

ratelimit:
  enabled: true                     # Override with RATELIMIT_ENABLED
  requests: 100                     # Override with RATELIMIT_REQUESTS
  window: "1m"                      # Override with RATELIMIT_WINDOW

migrations:
  directory: "./migrations"         # Override with MIGRATIONS_DIRECTORY
  timeout: 600                      # Override with MIGRATIONS_TIMEOUT (seconds)
  locktimeout: 30                   # Override with MIGRATIONS_LOCKTIMEOUT (seconds)

health:
  timeout: 5                        # Override with HEALTH_TIMEOUT (seconds)
  database_check_enabled: true      # Override with HEALTH_DATABASE_CHECK_ENABLED
# MongoDB ÈÖçÁΩÆ
mongodb:
  enabled: true                    # Override with MONGODB_ENABLED
  uri: "mongodb://mongodb:27017"   # Override with MONGODB_URI (‰ΩøÁî® Docker ÊúçÂä°Âêç)
  database: "uyou_api"              # Override with MONGODB_DATABASE
  max_pool_size: 100                # Override with MONGODB_MAX_POOL_SIZE
  min_pool_size: 10                 # Override with MONGODB_MIN_POOL_SIZE
  connect_timeout: 10               # Override with MONGODB_CONNECT_TIMEOUT (seconds)

# Redis ÈÖçÁΩÆ
redis:
  enabled: true                    # Override with REDIS_ENABLED
  host: "redis"                     # Override with REDIS_HOST (‰ΩøÁî® Docker ÊúçÂä°Âêç)
  port: 6379                        # Override with REDIS_PORT
  password: ""                      # Override with REDIS_PASSWORD
  db: 0                             # Override with REDIS_DB
  dial_timeout: 5                   # Override with REDIS_DIAL_TIMEOUT (seconds)
  read_timeout: 3                   # Override with REDIS_READ_TIMEOUT (seconds)
  write_timeout: 3                  # Override with REDIS_WRITE_TIMEOUT (seconds)
  pool_size: 10                     # Override with REDIS_POOL_SIZE
  min_idle_conns: 5                 # Override with REDIS_MIN_IDLE_CONNS

# RabbitMQ ÈÖçÁΩÆ
# Ê≥®ÊÑèÔºöÊâÄÊúâÂæÆÊúçÂä°ËøûÊé•Âà∞Âêå‰∏Ä‰∏™ RabbitMQ ÂÆû‰æã
# ÈÄöËøá‰ª£Á†ÅÊéßÂà∂ÊòØÂê¶ÂèëÂ∏É/ËÆ¢ÈòÖÔºå‰∏çÈúÄË¶ÅÈÖçÁΩÆÈôêÂà∂
rabbitmq:
  enabled: true                    # Override with RABBITMQ_ENABLED
  url: "amqp://guest:guest@rabbitmq:5672/"  # Override with RABBITMQ_URL (‰ΩøÁî® Docker ÊúçÂä°Âêç)
  exchange: "uyou_events"           # Override with RABBITMQ_EXCHANGE
  exchange_type: "topic"            # Override with RABBITMQ_EXCHANGE_TYPE
  queue: "uyou_queue"               # Override with RABBITMQ_QUEUE
  routing_key: "uyou.#"             # Override with RABBITMQ_ROUTING_KEY
  prefetch_count: 10                # Override with RABBITMQ_PREFETCH_COUNT

# gRPC ÈÖçÁΩÆ
grpc:
  enabled: true                    # Override with GRPC_ENABLED
  port: "9090"                      # Override with GRPC_PORT
  max_recv_msg_size: 4194304        # Override with GRPC_MAX_RECV_MSG_SIZE (4MB)
  max_send_msg_size: 4194304        # Override with GRPC_MAX_SEND_MSG_SIZE (4MB)
  connection_timeout: 10            # Override with GRPC_CONNECTION_TIMEOUT (seconds)

# Prometheus ÁõëÊéßÈÖçÁΩÆ
metrics:
  enabled: true                    # Override with METRICS_ENABLED
  port: "9091"                      # Override with METRICS_PORT
  path: "/metrics"                  # Override with METRICS_PATH

# ÂÆöÊó∂‰ªªÂä°ÈÖçÁΩÆ
scheduler:
  enabled: true
  timezone: "Asia/Shanghai"

# ÂÆâÂÖ®ÈÖçÁΩÆ
security:
  bcrypt_cost: 12                   # Override with SECURITY_BCRYPT_COST (10-14 Êé®Ëçê)
  password_min_length: 8            # Override with SECURITY_PASSWORD_MIN_LENGTH
  password_require_uppercase: true  # Override with SECURITY_PASSWORD_REQUIRE_UPPERCASE
  password_require_lowercase: true  # Override with SECURITY_PASSWORD_REQUIRE_LOWERCASE
  password_require_number: true     # Override with SECURITY_PASSWORD_REQUIRE_NUMBER
  password_require_special: true    # Override with SECURITY_PASSWORD_REQUIRE_SPECIAL
  max_login_attempts: 5             # Override with SECURITY_MAX_LOGIN_ATTEMPTS
  lockout_duration: 15              # Override with SECURITY_LOCKOUT_DURATION (ÂàÜÈíü)
  enable_security_headers: true     # Override with SECURITY_ENABLE_SECURITY_HEADERS

